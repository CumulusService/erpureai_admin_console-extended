@*
Modern Action Dropdown Component
Provides a clean dropdown menu with descriptive actions
*@

<div class="dropdown">
    <button class="btn @(string.IsNullOrEmpty(CssClass) ? "btn-outline-secondary btn-sm" : CssClass) dropdown-toggle action-dropdown-btn" 
            type="button" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
            disabled="@IsDisabled">
        <i class="fas fa-cog me-2"></i>
        @ButtonText
    </button>
    <ul class="dropdown-menu action-dropdown-menu">
        @if (Actions != null && Actions.Any())
        {
            @foreach (var action in Actions)
            {
                @if (action.IsSeparator)
                {
                    <li><hr class="dropdown-divider"></li>
                }
                else if (action.IsVisible)
                {
                    <li>
                        <button class="dropdown-item @GetActionClass(action.Type)" 
                                @onclick="@(() => action.OnClick.InvokeAsync())"
                                disabled="@action.IsDisabled">
                            <div class="d-flex align-items-center">
                                @if (!string.IsNullOrEmpty(action.IconClass))
                                {
                                    <i class="@action.IconClass me-2 action-icon" style="width: 16px;"></i>
                                }
                                <div class="flex-grow-1">
                                    <div class="action-title">@action.Title</div>
                                    @if (!string.IsNullOrEmpty(action.Description))
                                    {
                                        <small class="action-description">@action.Description</small>
                                    }
                                </div>
                                @if (!string.IsNullOrEmpty(action.ConsequenceText))
                                {
                                    <small class="action-consequence ms-2">@action.ConsequenceText</small>
                                }
                            </div>
                        </button>
                    </li>
                }
            }
        }
        else
        {
            <li><span class="dropdown-item-text text-muted">No actions available</span></li>
        }
    </ul>
</div>

@code {
    [Parameter] public string ButtonText { get; set; } = "Actions";
    [Parameter] public List<DropdownAction> Actions { get; set; } = new();
    [Parameter] public bool IsDisabled { get; set; } = false;
    [Parameter] public string CssClass { get; set; } = string.Empty;

    private string GetActionClass(ActionType type)
    {
        return type switch
        {
            ActionType.Danger or ActionType.Delete => "action-danger",
            ActionType.Warning => "action-warning",
            ActionType.Success => "action-success",
            _ => "action-neutral"
        };
    }
}

<style>
    .action-dropdown-btn {
        border-radius: 6px;
        font-weight: 500;
        transition: all 0.2s ease;
    }
    
    .action-dropdown-menu {
        border-radius: 8px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        border: 1px solid #e0e0e0;
        min-width: 250px;
    }
    
    .action-dropdown-menu .dropdown-item {
        padding: 12px 16px;
        border: none;
        background: none;
        width: 100%;
        text-align: left;
        transition: all 0.2s ease;
        border-radius: 0;
    }
    
    .action-dropdown-menu .dropdown-item:hover:not(:disabled) {
        background-color: #f8f9fa;
        transform: none;
    }
    
    .action-dropdown-menu .dropdown-item:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .action-title {
        font-weight: 500;
        font-size: 14px;
        line-height: 1.4;
    }
    
    .action-description {
        color: #6c757d;
        font-size: 12px;
        line-height: 1.3;
        margin-top: 2px;
        display: block;
    }
    
    .action-consequence {
        color: #dc3545;
        font-weight: 500;
        font-size: 11px;
    }
    
    .action-icon {
        color: #6c757d;
    }
    
    .action-danger:hover:not(:disabled) {
        background-color: #fdf2f2;
    }
    
    .action-danger:hover:not(:disabled) .action-icon {
        color: #dc3545;
    }
    
    .action-warning:hover:not(:disabled) {
        background-color: #fefbf3;
    }
    
    .action-warning:hover:not(:disabled) .action-icon {
        color: #ffc107;
    }
    
    .action-success:hover:not(:disabled) {
        background-color: #f1f8f4;
    }
    
    .action-success:hover:not(:disabled) .action-icon {
        color: #28a745;
    }
</style>