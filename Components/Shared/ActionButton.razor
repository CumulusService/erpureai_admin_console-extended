@*
Modern Action Button Component
Provides clear, descriptive buttons with consistent styling and accessibility
*@

<button class="@GetButtonClasses()" 
        @onclick="@OnClick" 
        @onmouseover="@OnMouseOver"
        disabled="@IsDisabled"
        title="@FullDescription">
    @if (IsLoading)
    {
        <div class="d-flex align-items-center">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            <span>@LoadingText</span>
        </div>
    }
    else
    {
        <div class="d-flex align-items-center">
            @if (!string.IsNullOrEmpty(IconClass))
            {
                <i class="@IconClass me-2" aria-hidden="true"></i>
            }
            <span>@Text</span>
            @if (ShowConsequence && !string.IsNullOrEmpty(ConsequenceText))
            {
                <small class="ms-2 opacity-75">(@ConsequenceText)</small>
            }
        </div>
    }
</button>

@code {
    [Parameter] public string Text { get; set; } = "";
    [Parameter] public string IconClass { get; set; } = "";
    [Parameter] public ActionType Type { get; set; } = ActionType.Primary;
    [Parameter] public ButtonSize Size { get; set; } = ButtonSize.Normal;
    [Parameter] public EventCallback OnClick { get; set; }
    [Parameter] public EventCallback OnMouseOver { get; set; }
    [Parameter] public bool IsDisabled { get; set; } = false;
    [Parameter] public bool IsLoading { get; set; } = false;
    [Parameter] public string LoadingText { get; set; } = "Please wait...";
    [Parameter] public string FullDescription { get; set; } = "";
    [Parameter] public string ConsequenceText { get; set; } = "";
    [Parameter] public bool ShowConsequence { get; set; } = true;
    [Parameter] public string AdditionalClasses { get; set; } = "";

    private string GetButtonClasses()
    {
        var classes = new List<string> { "btn", "action-btn" };
        
        // Size classes
        switch (Size)
        {
            case ButtonSize.Small:
                classes.Add("btn-sm");
                break;
            case ButtonSize.Large:
                classes.Add("btn-lg");
                break;
        }
        
        // Type classes
        switch (Type)
        {
            case ActionType.Primary:
                classes.Add("btn-primary");
                break;
            case ActionType.Secondary:
                classes.Add("btn-outline-secondary");
                break;
            case ActionType.Success:
                classes.Add("btn-success");
                break;
            case ActionType.Warning:
                classes.Add("btn-warning");
                break;
            case ActionType.Danger:
                classes.Add("btn-danger");
                break;
            case ActionType.Info:
                classes.Add("btn-info");
                break;
            case ActionType.View:
                classes.Add("btn-outline-primary");
                break;
            case ActionType.Edit:
                classes.Add("btn-outline-warning");
                break;
            case ActionType.Delete:
                classes.Add("btn-outline-danger");
                break;
        }
        
        if (!string.IsNullOrEmpty(AdditionalClasses))
        {
            classes.Add(AdditionalClasses);
        }
        
        return string.Join(" ", classes);
    }
}

<style>
    .action-btn {
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.2s ease;
        border-width: 2px;
    }
    
    .action-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .action-btn:active {
        transform: translateY(0);
    }
    
    .action-btn:disabled {
        transform: none;
        cursor: not-allowed;
    }
    
    .action-btn .spinner-border-sm {
        width: 1rem;
        height: 1rem;
    }
</style>